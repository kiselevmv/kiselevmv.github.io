---
layout: post
title:  "Установка среды разработки для программирования на C без прав администратора"
date: 2020-07-29 21:53:00 -0000
tags: programming
comments: true
---

Раньше я уже рассматривал, [как работать без прав администратора на компьютере](/blog/2016/noadmin). Мне понадобился компилятор С и пришлось искать способы, как установить компилятор С на компьютер без прав администратора. Компилятор [Visual Studio C++](https://visualstudio.microsoft.com/ru/vs/features/cplusplus/) при всех его плюсах, включая бесплатность, поддержку C и C++, возможность кросс-компиляции для мобильных платформ и отличный отладчик не подходит. По всей видимости, его невозможно или очень сложно сделать переносимой (portable) сборкой. Прекрасно работает переносимая сборка [Visual Studio Code](https://code.visualstudio.com/docs/editor/portable), но это продвинутый текстовый редактор для программ. Он может компилировать и отлаживать программы, но для начала нужно иметь установленный компилятор С. Компилятор C для Windows есть, это [MinGW](http://www.mingw.org/). Есть [переносимая сборка](https://github.com/jonasstrandstedt/MinGW) MinGW для Windows, но она семилетней давности. 
Чтобы не усложнять задачу - хорошо бы использовать комплект из IDE с компилятором. 

Моим критериям удовлетворяет [Code::blocks](http://www.codeblocks.org/). Открытая, кросс-платформенная и свободная IDE для программирования на С, С++ и фортран. Возможно, это лучший выбор для установки на компьютер без прав администратора. Имеется [установщик](http://www.codeblocks.org/downloads/26) для пользователей без прав администратора. Ищите файл `codeblocks-20.03-setup-nonadmin.exe` или более новую версию. Среда развивается, компилирует 64-разрядный код, поддерживает плагины, отладчик. Интерфейс программы похож на Visual Studio. Короче говоря, я мог бы посоветовать Code::blocks почти всем. Но там сложный интерфейс, много настроек. Не очень хорошо для любительских проектов. Сам я предпочёл Pelles C. 

Pelles C это бесплатный, но не свободно распространяемый компилятор С. Это довольно простая и универсальная IDE для С с поддержкой отладчика и всевозможными редакторами ресурсов, включая битмапы, иконки и курсоры. Я предпочёл Pelles C исключительно из-за относительной простоты. Вся программа занимает около 13 Мегабайт, продолжает развиваться и поддеживаться. Компилятор Pelles C не самый быстрый и эффективный, он проигрывает едва ли не всем другим компиляторам С для Windows. Но для любительских проектов это одна из последних вещей, на которые я обращаю внимание. К сожалению Pelles C чуть сложнее сделать переносимым, чем Code::blocks. В интернете можно найти рекомендации по переносимости старых версий IDE, но они не актуальны для текущей, десятой версии Pelles C.

Скачать Pelles C можно с [сайта проекта](http://www.smorgasbordet.com/pellesc/). Но для скачивания доступен только инсталлятор `setup.exe`. Pelles использует собственный инсталлятор, [UniExtract](https://github.com/Bioruebe/UniExtract2/releases) не может извлечь файлы из этого инсталлятора. Пришлось установить его на личный компьютер с Windows, где права администратора имеются. Я использовал Windows, установленный на сервере. Но это может быть обычный Windows ПК. Устанавливать лучше в тот же путь, куда планируется размещать программу на компьютере без прав администратора. Я установил его в путь `C:\Apps\Dev\PellesC\`. Установка занимает немного времени. Теперь весь каталог `C:\Apps\Dev\PellesC\` нужно сжать в архив или скопировать на флешку целиком, без сжатия.

На целевом компьютере без прав администратора Pelles C можно разжать или скопировать в тот же путь. После этого, программа запускается. Нужно лишь запустить файл `poide.exe`. Теперь нужно выполнить несколько настроек вручную. Нужно добавить путь, по которому размещена программа в пользовательскую переменную `PATH`. Для этого запускаем панель управления виндоус, в поле "Search control pannel" набираем `path` и жмём "Edit environment variables for your account".

![Add PATH](https://res.cloudinary.com/dlqc5rp9l/image/upload/v1595995926/blog/pellesc-path_nlulzt.png)

Редактируем пользовательскую переменную `Path` и добавляем в неё путь, в который мы распаковали Pelles C. 

![Pelles C, add PATH](https://res.cloudinary.com/dlqc5rp9l/image/upload/v1595995926/blog/pellesc-path-add_jp50ft.png)

Таким образом, эта IDE полностью переносима и проблема только в первоначальной установке программы. Поскольку Pelles C бесплатный, но не свободный проект - я не распространяю переносимую сборку, а только рассказываю, как её сделать. Перенесённый таким образом на рабочий компьютер компилятор Pelles C работает и компилирует не только "Hello world!", но и свободно распространяемые программы. Я уже опробовал его на [pForth](https://github.com/philburk/pforth), ради которого мне и понадобился компилятор С на компьютере.