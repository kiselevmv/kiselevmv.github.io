---
layout: post
title:  "О горячих клавишах при загрузке Macbook"
date: 2019-03-01 10:17:00 -0000
tags: macOS manual
---

Это заметка для себя. Но я надеюсь, что она может быть полезна кому-то ещё. У маков есть интересные и полезные режимы загрузки и войти в них можно нажимая клавиши при загрузке.

Все клавиши, управляющие режимами загрузки нужно зажимать в самом начале загрузки. Лучше всего зажать их ещё перед включением ноутбука или в ходе выключения при перезагрузке.

1. Режим "целевого диска" включается нажатием клавиши "T" при загрузке. Сам режим "целевого диска" (target drive) - это самая недооценённая возможность маков. Проще говоря, он превращает макбук в флешку. Если загрузить мак в режиме целевого диска и подключить его к другому компьютеру кабелем - он будет работать как большая флешка. Удобно для прямого копирования больших объёмов данных - не нужна флешка-посредник. Минусы есть. Во-первых на моём Macbook 2016 этот режим просто не работает. На предыдущих маках нужны были переходники с порта thunderbolt на USB. Эти проблемы, конечно, обесценивают этот великолепный режим работы. В сети я находил [упоминания](https://www.macworld.com/article/2911813/got-a-new-macbook-usb-target-disk-mode-works-with-the-right-cable-which-apple-doesnt-sell.html), что режим целевого диска с маками с разъёмом USB-C работает при использовании "правильного" кабеля USB-A версий 3.0 или 3.1, но пока не купил такого, чтобы проверить. Ещё хуже то, что USB-C/USB-C кабель, который шёл с макбуком в комплекте для подключения не подходит.

2. Режим восстановления запускается комбинацией Command (⌘)-R. Как ни печально, MacOS тоже может "засоряться", глючить и вести себя непредсказуемо. Переустановка может решить программные проблемы. Указанное сочетание переустановит ту же операционную систему, что была установлена последней. Если нужно переустановить другую версию операционной системы - помогут сочетание Option(⌥)-Command(⌘)-R, которое запустит установку последней версии MacOS, совместимой с компьютером. Или Shift-Option(⌥)-Command(⌘)-R - которая переустановит "оригинальную" версию MacOS, которая была установлена на компьютере изначально. Если он старый и эта версия MacOS больше не поддерживается Apple - будет установлена ближайшая поддерживаемая версия.

3. Загрузка с внешнего накопителя или загрузка другой ОС, установленной на диск Мака возможна, если удерживать Option(⌥) при запуске. Я держу на диске Windows одновременно с MacOS. Самое прекрасное это то, что виндоус можно запускать и как отдельную операционную систему и в виртуальной машине внутри MacOS. Причём это будет одна и та же ОС. Это хорошая тема для отдельной статьи.

4. Клавиши Option(⌥)-Command(⌘)-P-R сбросят NVRAM компьютера. Мне так делать не приходилось. NVRAM - это отдельное хранилище для некоторых настроек компьютера. Думаю, это стоит делать только если заслуживающая доверия статья или служба поддержки Apple советуют сделать это.

5. Если удерживать Shift(⇧) при запуске - компьютер загрузится в безопасном режиме. Его имеет смысл использовать, если компьютер "глючит". Это не способ решить проблему, но способ изолировать проблему. Если в безопасном режиме всё работает хорошо - значит проблема с каким-то программным компонентом, который не запускается в безопасном режиме. В основном безопасный режим маков соответствует безопасному режиму Windows. Он предотвращает автозапуск программ, очищает кэши, проверяет загрузочный диск, отключает пользовательские шрифты. Загрузка в безопасном режиме нужна очень редко, но знать про неё нужно.

6. Удерживание клавиши D при загрузке запустит тестирование компьютера. По крайней мере можно узнать, связаны ли проблемы с "железом" или нет. Если удерживать Option(⌥)-D эта утилита будет загружена и запущена через интернет. То есть можно быть уверенным, что используется последняя версия утилиты тестирования.

7. Удерживая клавишу N можно загрузиться с сервера. Т.е. получится что-то вроде "тонкого клиента". Кому нужно - те знают, для большинства эта функция никогда не пригодится.

8. Удерживая клавишу Command (⌘)-V можно загрузиться в режиме подробного протоколирования. В ходе загрузки и выключения компьютера будет видна консоль с сообщениями от запускаемых или останавливаемых сервисов. Плюс, как я понимаю, ведутся подробные протоколы загрузки. Это функция для очень опытных пользователей или служб поддержки. На сайте поддержки Apple почему-то было указано, что в режиме подробного протоколирования можно вводить команды Unix. Это не так. Компьютер загружается как обычно, просто выдаёт больше информации в ходе загрузки и выключения.

9. а Command(⌘)-S загрузка в однопользовательском режиме. В этом режиме компьютер загружается в режиме командной строки. Теперь можно пользоваться командами Unix/Linux, чтобы сделать нужные вещи. Для большинства пользователей режимы ненужные. Но я иногда пользуюсь ими, чтобы просто редактировать тексты. Консольные текстовые редакторы Unix неплохо работают на Маках и можно работать с текстом полностью без отвлечений. Думаю, это тоже неплохая тема для отдельной статьи. Минус в том, что компьютер загружается в суперпользователя - root. С практической точки зрения - не стоит работать из-под суперпользователя. Но я всё же делаю это и не вижу беды, если на личном компьтере редактировать тексты под суперпользвателем.

Во всех режимах загрузки описанных выше много нюансов. Одни работают не так, как описано на старых маках. Другие - не работают на новых. Например, однопользовательский режим не работает на новых маках. Наверное, есть и другие особенности. Пишите, если какие-то нюансы нужно расписать подробнее. И помните, лучшую справку всегда можно получить на сайте [поддержки Apple](https://support.apple.com/).