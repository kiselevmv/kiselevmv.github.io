---
layout: post
title:  "Укрощение AutoCAD в Linux или вниз по лестнице идущей вверх"
date: 2008-03-02 17:03:00 -0000
tags: Software
---

Значительную часть субботы я посвятил опробованию различных CAD в Linux. Проблема серъёзная, чтобы на работе использовать Linux проектировщику  нужно иметь CAD (САПР), в котором можно чертить рабочие чертежи. И главное, сохранять их в формате, доступном для других проектировщиков. На практике, это означает работу с чертежами в формате <a href="http://en.wikipedia.org/wiki/.dwg">dwg</a>. На моей работе, как и в большинстве российских проектных контор используется AutoCAD. Версии 2004, 2006, иногда встречается 2008. 
Для Windows можно найти CAD, способные работать с файлами в формате dwg, как с родными. Лично я пробовал <a href="http://brics-cad.ru/">Briscad</a>. Остался не вполне доволен. Но, в целом, это вполне удобный и мощный CAD.  Осталось подобрать что-либо подобное под Linux.

Но начал я с попыток всё же запустить AutoCAD в Linux. Попытка 1 - AutoCAD 2006 в Windows, работающем в виртуальной машине VirtualBox. Как и следовало ожидать, результат положительный. Но работа на моём компьютере (Intel Pentium IV 2.4 ГГц, 1 Гб оперативной памяти, встроенная видеокарточка) оказалась не быстрой. Сам процесс черчения идёт гладко, но AutoCAD прорисовывает линию заново при каждом перемещении курсора. Очень наглядно, но нещадно мерцает при работе в виртуальной машине. 

Далее последовала попытка установить AutoCAD 2006 при помощи среды для запуска <a href="http://ru.wikipedia.org/wiki/Wine">wine</a>. Неудача ещё на стадии установки. AutoCAD 2006 использует .NET 1.1. Установить .NET 1.1 при помощи wine пока безнадёжная задача. Возможно есть обходные пути, но поиск в интернете и особенно, отчёты в wine <a href="http://appdb.winehq.org/appview.php?iAppId=86">Application Database</a> результатов не дал. В Application Database указано, что AutoCAD 2004 не работает тоже, но в одном из форумов я прочитал, что это последняя версия AutoCAD, которую можно запустить в wine. Проблемы начались с установки. Я сделал выборочную установку, где отключил всё, кроме самого AutoCAD, однако, при попытке установить компоненты VBA установка закончилась с ошибкой. Все файлы AutoCAD были распакованы, но сам он не запускался. И опять же никаких рекомендаций по этому поводу в интернете.

AutoCAD 2002 показан в Application Database как <a href="http://appdb.winehq.org/objectManager.php?sClass=version&iId=1924">работающий</a>. Однако, мне добиться работоспособности не удалось. Он установился, но отказался запускаться. Не хватало множества библиотек. Когда я скопировал все недостающие dll-библиотеки в каталог "windows/system32" сообщения об отсутствующих библиотеках исчезли, и появилось сообщение об отсутствии какого-то файла (лень сейчас воспроизводить ошибку), который лежал на положенном месте. Подозреваю, что затратив некоторое время на изучение форумов, сообщений об ошибках и прочее, я смог бы запустить AutoCAD, но оставлю этот эксперимент на более позднее время.

По всей видимости, последняя версия AutoCAD, нормально устанавливающаяся и работающая в wine - это AutoCAD R14. Есть немало описаний его установки и скриншотов. Так что я взял старый AutoCAD R14 и просто установил его. Единственная проблема, возникшая с установкой - невозможность сделать Custom Install. Но с Typical Install всё получилось нормально. Программа установилась. В меню "Приложения" Гнома появилась новая программа - AutoCAD R14. Запуск прошёл вполне нормально. Кажется, есть проблемка со шрифтами. Но её наверняка можно решить.
Что не так с AutoCAD R14. Он просто старый. Невозможно масштабировать чёртёж колесом мыши, двигать его зажав среднюю кнопку мыши. И, самое главное, нет отдельных пространств модели и пространства листа. Последнее не будет проблемой для большинства проектировщиков. Похоже, что я один во всём проектном институте где я работаю, черчу в масштабе 1:1. Но именно для меня  этот недостаток наиболее существенен. <a href="http://www.2nature.ru/files/AutoCAD_R14_linux.png" target="_new">Скриншот</a> AutoCAD R14 запущенного в Linux прилагается.
Программа на будущее - опробовать AutoCAD 2000 (где появились раздельные пространства модели и листа), попытаться запустить AutoCAD 2002, опробовать несколько CAD для Linux. Они есть. Есть хорошие средства для твёрдотельного моделирования, для 2D графики. Некоторые из них я уже опробовал, они не дотягивают до AutoCAD по универсальности, но могут быть использованы. 

P.S. Конфигурация системы, на которой проводились эксперименты:

- Система - Ubuntu 7.10
- Ядро - 2.6.22
- wine - wine-0.9.46